name: pogo
base: core18
version: git
summary: A fast and minimalist audio player for Linux
description: |
  Pogo is a fast and minimalist audio player for Linux. It
  groups tracks by album, which uses less space and simplifies
  rearranging your playlist. Pogo does not organize your tracks in a
  music library and does not stream or download tracks. Therefore, it is
  best suited for people who store their tracks by album and want a
  simple way of playing them. Pogo allows you to quickly search for music
  on local drives and in the playlist. It also features an equalizer and
  displays covers and desktop notifications. Pogo is a fork of Decibel
  Audio Player and supports most common audio formats. It is written in
  Python and uses GTK+ and GStreamer.
grade: stable
confinement: strict

slots:
  dbus-daemon:
    interface: dbus
    bus: session
    name: org.mpris.pogo

parts:
  dependencies:
    plugin: nil
    stage-packages:
      - gir1.2-gdkpixbuf-2.0
      - gir1.2-glib-2.0
      - gir1.2-gstreamer-1.0
      - gir1.2-gtk-3.0
      - gir1.2-pango-1.0
      - gir1.2-notify-0.7
      - gstreamer1.0-plugins-base
      - gstreamer1.0-plugins-good
      - gstreamer1.0-pulseaudio
      - python3-dbus
      - python3-gi
      - python3-mutagen
      - python3-pil
      - libgl1
      - libglu1-mesa
      - freeglut3
      - libgpm2
      - libslang2

  pogo:
    source: .
    plugin: dump
    after:
      - dependencies

apps:
  pogo:
    command: usr/bin/python3 $SNAP/pogo.py
    extensions: 
      - gnome-3-28
    slots:
      - dbus-daemon
    environment:
      PYTHONPATH: $SNAP/usr/lib/python3/dist-packages
      LD_LIBRARY_PATH: $SNAP/usr/lib/$SNAPCRAFT_ARCH_TRIPLET
      GI_TYPELIB_PATH: $SNAP/usr/lib/$SNAPCRAFT_ARCH_TRIPLET/girepository-1.0
    plugs:
      - home
      - removable-media
      - system-observe
      - audio-playback
